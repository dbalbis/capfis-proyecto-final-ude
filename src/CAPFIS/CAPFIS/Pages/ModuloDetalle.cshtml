@page "/{slug}"
@model CAPFIS.Pages.ModuloDetalleModel
@{
    Layout = "/Pages/Shared/_Layout.cshtml";
    ViewData["Title"] = Model.Modulo?.Titulo ?? "Módulo";
}

@if (Model.Modulo != null)
{
    <!-- Hero Section -->
    <div class="mb-4 hero-bg py-5 d-flex flex-column justify-content-center align-items-center"
         style="min-height: 320px; background-image: url('@Model.Modulo.ImagenHero');">
        <div class="container">
            <!-- TÍTULO DESTACADO -->
            <h1 class="fw-bold mb-5 text-center"
                style="color: #fff;
                       border-color: #FFA800;
                       text-shadow: 0 4px 18px rgba(0,0,0,0.8);
                       font-size: 3rem;
                       line-height: 1.2;">
                @Html.Raw(Model.Modulo.TituloDetallado)
            </h1>

            <!-- BOTÓN PRINCIPAL -->
            <!-- BOTÓN PRINCIPAL -->
            <div class="d-flex gap-3 justify-content-center mt-4">
                @if (User.Identity?.IsAuthenticated ?? false)
                {
                    @if (Model.EstaInscripto)
                    {
                        <a asp-page="/Modulo/Aprender" asp-route-slug="@Model.Modulo.Slug"
                           class="btn btn-success fw-bold px-4 py-3">
                            ✅ Continuar Entrenamiento
                        </a>
                    } else
                    {
                        <form method="post" asp-page-handler="Inscribirse" class="d-inline">
                            <input type="hidden" name="ModuloId" value="@Model.Modulo.Id" />
                            <button type="submit" class="btn btn-primary fw-bold px-4 py-3">
                                🚀 Comenzar Entrenamiento
                            </button>
                        </form>
                    }
               
                }
                else
                {
                    <a class="btn btn-primary fw-bold px-4 py-3" asp-page="/Login">
                        🚀 Inicia Sesión para Comenzar
                    </a>
                }
            </div>
        </div>
    </div>


    <!-- CONTENIDO CON TEXTO BLANCO USANDO BOOTSTRAP -->
    <div class="container text-white">

        @Html.Raw(Model.Modulo.Descripcion)

    </div>

}
else
{
    <div class="container py-5">
        <h2 class="text-white text-center">Módulo no encontrado</h2>
    </div>
}
